# 数据库构思

## 基础账号表

应该有一个基础账号表，注册登录的信息都存储在这里。

还得支持手机号注册登录、邮箱注册登录、普通账号密码注册登录、第三方登录（微信、支付宝、Apple）。第三方的登录还不能存储在基础账号表中，需要单独的表来存储。

## RBAC权限控制

我们的项目中，权限控制是基于RBAC的，所以需要一个角色表、一个权限表、一个角色权限表。

还得实现分权控制，角色之间的权限可以继承，还得实现多继承。

基础的权限控制，（普通用户、商家、船主、管理员、超级管理员）

商家和船主是有所属单位的，但可选，也就是注册的时候可以不选择单位。这要考虑权限如何控制

## 单位表

单位表就是注册的单位实体，单位表中需要存储单位名称、单位地址、单位电话、统一社会信用代码、单位法人、有效期等相关信息。单位需要审核通过才能注册成功。注册单位的时候附带一个单位管理员，单位管理员需要审核单位下的人员注册等信息。

每个单位下可以有多个用户，每个用户可以有多个角色。

## 商家表

商家就是某个店铺，商家可以以自己店铺的信息作为单位注册，也可以作为用户注册到其他单位中。

## 船主表

船主就是某个船只的拥有者，船主可以以自己船只的信息作为单位注册，也可以作为用户注册到其他单位中。

一个船主可以有多个船只。同一个单位下的船主可以有多个。

## 码头表

码头表中需要存储码头的名称、码头的地址、码头的联系方式、码头的经纬度等相关信息。

## 船只表

船只表中需要存储船只名称、船只类型、船只长度、船只宽度、船只最大载重、船只最大续航、船只的登记人（船主），从登记人可以查到对应的单位

同一个单位下的船主可以查询这个单位下的所有船只。

创建船只时可以从公共定义的船只类型中选择，也可以自定义船只类型。

## 船只类型表

记录所有船只表中的信息，这里要考虑如何满足数据库范式

## 订单表

订单用于登记系统产生的所有订单，涉及到船舶的基础操作就是租用。
使用方法就是 某个时间 - 到某个时间，租用某个船只。从某个码头 - 到某个码头。码头可以自指

租用的时候需要填写相关信息，比如租用时间、租用船只、租用码头、租用人员、租用费用等。由系统自动分配或者船主手动接单。

租用分为实时租用和预约租用。

实时租用：

实时租用就是直接创建订单，然后支付，然后使用。

预约租用：

预约租用就是先创建订单，然后支付，然后预约，然后使用。

租用如果选了特定的船只，就选，没有选特定的船只，就由系统自动分配。

## 日志表

日志表中需要存储日志的类型、日志的内容、日志的时间、日志的来源、日志的等级等相关信息。

需要记录相关的审核操作，比如单位审核、船只审核、用户审核等。
